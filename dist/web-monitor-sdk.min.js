/**
 * Copyright web-monitor-sdk 0.0.2 (87020cc) | https://github.com/brizer/web-monitor-sdk
 */

var WebMonitorSDK=function(t){"use strict";var o={},n=function(){return"[object process]"===Object.prototype.toString.call("undefined"!=typeof process?process:0)?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:o},e=n(),r="Web Monitor Logger ",i=function(){function t(){this.enabled=!1}return t.prototype.disable=function(){this.enabled=!1},t.prototype.enable=function(){this.enabled=!0},t.prototype.log=function(){for(var t=[],o=0;o<arguments.length;o++)t[o]=arguments[o];this.enabled&&e.console.log(r+"[Log]: "+t.join(" "))},t.prototype.warn=function(){for(var t=[],o=0;o<arguments.length;o++)t[o]=arguments[o];this.enabled&&e.console.warn(r+"[Warn]: "+t.join(" "))},t.prototype.error=function(){for(var t=[],o=0;o<arguments.length;o++)t[o]=arguments[o];this.enabled&&e.console.error(r+"[Error]: "+t.join(" "))},t}();e.__WebMonitor__=e.__WebMonitor__||{};var s,l=e.__WebMonitor__.logger||(e.__WebMonitor__.logger=new i),a=n();!function(t){t.ERROR="ERROR",t.CHANGE_ACTIVE="CHANGE_ACTIVE",t.CATCH_ERROR="CATEH_ERROR"}(s||(s={}));var c=function(){function t(){this.eventLists=[]}return t.prototype.emit=function(t,o){(this.eventLists[t]||[]).forEach(function(t){return t(o)})},t.prototype.on=function(t,o){this.eventLists[t]||(this.eventLists[t]=[]),this.eventLists[t].push(o)},t.prototype.off=function(t,o){var n=(this.eventLists[t]||[]).findIndex(function(t){return t===o});n>-1&&this.eventLists[t].splice(n,1)},t}();a.__WebMonitor__=a.__WebMonitor__||{};var d=a.__WebMonitor__.hub||(a.__WebMonitor__.hub=new c),u=function(){function t(){this.isActive=!0,this.errordefo={t:0,n:"js",msg:"",data:{}},this.init()}return t.prototype.init=function(){var t=this;d.on(s.CHANGE_ACTIVE,function(o){l.log("Global accepted "+s.CHANGE_ACTIVE+": "+o),t.isActive=o}),this.installGlobalErrorHandle()},t.prototype.installGlobalErrorHandle=function(){this.oldErrorHandler=window.onerror,window.onerror=this.trackWindowOnError.bind(this)},t.prototype.trackWindowOnError=function(t,o,n,e,r){if(l.log("Global get error"),!1!==this.isActive){var i=Object.assign({},this.errordefo);return setTimeout(function(){e=e||window.event||0,i.msg=r&&r.stack?r.stack.toString():t,i.data={resourceUrl:o,line:n,col:e},i.t=(new Date).getTime(),l.log("Global track error info: "+JSON.stringify(i)),d.emit(s.CATCH_ERROR,i)},0),this.oldErrorHandler?this.oldErrorHandler.apply(this,arguments):void 0}},t}(),f={debug:!1,actived:!0,domain:void 0,blacklistUrls:[],blacklistAjaxUrls:[],outtime:300,sendPage:!0,sendAjax:!0,sendResource:!0,sendError:!0};return t.hub=d,t.init=function(t){!0===(t=Object.assign({},f,t)).debug&&l.enable(),l.log("start logging..."),!0===t.sendError&&new u},t}({});
